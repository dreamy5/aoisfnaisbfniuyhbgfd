{"
  "m1": "aW1wb3J0IHJlcXVlc3RzLCBvcywgc3RyaW5nLCByYW5kb20sIHdpbjMyY3J5cHQsIHNodXRpbCwgc3FsaXRlMywgemlwZmlsZSwganNvbiwgYmFzZTY0LCBwc3V0aWwsIHB5YXV0b2d1aSwgY3YyCmltcG9ydCBudW1weSBhcyBucApmcm9tIHJlIGltcG9ydCBmaW5kYWxsCmZyb20gdXJsbGliLnJlcXVlc3QgaW1wb3J0IHVybG9wZW4KZnJvbSBDcnlwdG8uQ2lwaGVyIGltcG9ydCBBRVMKCgpjbGFzcyBIYXphcmRfVG9rZW5fR3JhYmJlcl9WMjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLndlYmhvb2sgPSAiaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvODk5Njc3Njk1Nzc5MTU2MDA4LzZzN1pxaVFmTUQ1ODFhSVRxYmlJS0RvcEtJQktNMVA2UldkUUxqRGxkcHlFcVc3UFBrNlBIWnlWRVlxaUppMVBmMFBmIgogICAgICAgIHNlbGYuZmlsZXMgPSAiIgogICAgICAgIHNlbGYuYXBwZGF0YSA9IG9zLmdldGVudigibG9jYWxhcHBkYXRhIikKICAgICAgICBzZWxmLnJvYW1pbmcgPSBvcy5nZXRlbnYoImFwcGRhdGEiKQogICAgICAgIHNlbGYudGVtcGZvbGRlciA9IGYie3NlbGYuYXBwZGF0YX1cXHtzZWxmLmxldHRlcnMoOCl9IgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLm1rZGlyKG9zLnBhdGguam9pbihzZWxmLnRlbXBmb2xkZXIpKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgb3MuX2V4aXQoMCkKICAgICAgICAgICAgIyBwYXNzCgogICAgICAgIHNlbGYudG9rZW5zID0gW10KCiAgICAgICAgc2VsZi5ncmFiUGFzc3dvcmQoKQogICAgICAgIHNlbGYuZ3JhYkNvb2tpZXMoKQogICAgICAgIHNlbGYuZ3JhYlRva2VucygpCiAgICAgICAgc2VsZi5zY3JlZW5zaG90KCkKICAgICAgICBzZWxmLlNlbmRJbmZvKCkKCiAgICBkZWYgZ2V0aGVhZGVycyhzZWxmLCB0b2tlbj1Ob25lLCBjb250ZW50X3R5cGU9ImFwcGxpY2F0aW9uL2pzb24iKToKICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAiQ29udGVudC1UeXBlIjogY29udGVudF90eXBlLAogICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoWDExOyBMaW51eCB4ODZfNjQpIEFwcGxlV2ViS2l0LzUzNy4xMSAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8yMy4wLjEyNzEuNjQgU2FmYXJpLzUzNy4xMSIKICAgICAgICB9CiAgICAgICAgaWYgdG9rZW46CiAgICAgICAgICAgIGhlYWRlcnMudXBkYXRlKHsiQXV0aG9yaXphdGlvbiI6IHRva2VufSkKICAgICAgICByZXR1cm4gaGVhZGVycwoKICAgIGRlZiBsZXR0ZXJzKHNlbGYsIHN0cmluZ0xlbmd0aCk6CiAgICAgICAgcmV0dXJuICcnLmpvaW4ocmFuZG9tLmNob2ljZShzdHJpbmcuYXNjaWlfbGV0dGVycykgZm9yIGkgaW4gcmFuZ2Uoc3RyaW5nTGVuZ3RoKSkKCiAgICBkZWYgZ2V0X21hc3Rlcl9rZXkoc2VsZik6CiAgICAgICAgd2l0aCBvcGVuKHNlbGYuYXBwZGF0YSsnXFxHb29nbGVcXENocm9tZVxcVXNlciBEYXRhXFxMb2NhbCBTdGF0ZScsICJyIikgYXMgZjoKICAgICAgICAgICAgbG9jYWxfc3RhdGUgPSBmLnJlYWQoKQogICAgICAgIGxvY2FsX3N0YXRlID0ganNvbi5sb2Fkcyhsb2NhbF9zdGF0ZSkKICAgICAgICBtYXN0ZXJfa2V5ID0gYmFzZTY0LmI2NGRlY29kZShsb2NhbF9zdGF0ZVsib3NfY3J5cHQiXVsiZW5jcnlwdGVkX2tleSJdKQogICAgICAgIG1hc3Rlcl9rZXkgPSBtYXN0ZXJfa2V5WzU6XQogICAgICAgIG1hc3Rlcl9rZXkgPSB3aW4zMmNyeXB0LkNyeXB0VW5wcm90ZWN0RGF0YShtYXN0ZXJfa2V5LCBOb25lLCBOb25lLCBOb25lLCAwKVsxXQogICAgICAgIHJldHVybiBtYXN0ZXJfa2V5CiAgICAKICAgIGRlZiBkZWNyeXB0X3BheWxvYWQoc2VsZiwgY2lwaGVyLCBwYXlsb2FkKToKICAgICAgICByZXR1cm4gY2lwaGVyLmRlY3J5cHQocGF5bG9hZCkKICAgIAogICAgZGVmIGdlbmVyYXRlX2NpcGhlcihzZWxmLCBhZXNfa2V5LCBpdik6CiAgICAgICAgcmV0dXJuIEFFUy5uZXcoYWVzX2tleSwgQUVTLk1PREVfR0NNLCBpdikKICAgIAogICAgZGVmIGRlY3J5cHRfcGFzc3dvcmQoc2VsZiwgYnVmZiwgbWFzdGVyX2tleSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpdiA9IGJ1ZmZbMzoxNV0KICAgICAgICAgICAgcGF5bG9hZCA9IGJ1ZmZbMTU6XQogICAgICAgICAgICBjaXBoZXIgPSBzZWxmLmdlbmVyYXRlX2NpcGhlcihtYXN0ZXJfa2V5LCBpdikKICAgICAgICAgICAgZGVjcnlwdGVkX3Bhc3MgPSBzZWxmLmRlY3J5cHRfcGF5bG9hZChjaXBoZXIsIHBheWxvYWQpCiAgICAgICAgICAgIGRlY3J5cHRlZF9wYXNzID0gZGVjcnlwdGVkX3Bhc3NbOi0xNl0uZGVjb2RlKCkKICAgICAgICAgICAgcmV0dXJuIGRlY3J5cHRlZF9wYXNzCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICByZXR1cm4gIkNocm9tZSA8IDgwIgogICAgICAgICAgICAKICAgIGRlZiBncmFiUGFzc3dvcmQoc2VsZik6CiAgICAgICAgbWFzdGVyX2tleSA9IHNlbGYuZ2V0X21hc3Rlcl9rZXkoKQogICAgICAgIGYgPSBvcGVuIChzZWxmLnRlbXBmb2xkZXIrIlxcR29vZ2xlIFBhc3N3b3Jkcy50eHQiLCAidysiKQogICAgICAgIGYud3JpdGUoIk1hZGUgYnkgUmRpbW8gfCBodHRwczovL2dpdGh1Yi5jb20vUmRpbW8vSGF6YXJkLVRva2VuLUdyYWJiZXItVjJcblxuIikKICAgICAgICBsb2dpbl9kYiA9IHNlbGYuYXBwZGF0YSsnXFxHb29nbGVcXENocm9tZVxcVXNlciBEYXRhXFxkZWZhdWx0XFxMb2dpbiBEYXRhJwogICAgICAgIHNodXRpbC5jb3B5Mihsb2dpbl9kYiwgIkxvZ2ludmF1bHQuZGIiKQogICAgICAgIGNvbm4gPSBzcWxpdGUzLmNvbm5lY3QoIkxvZ2ludmF1bHQuZGIiKQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCJTRUxFQ1QgYWN0aW9uX3VybCwgdXNlcm5hbWVfdmFsdWUsIHBhc3N3b3JkX3ZhbHVlIEZST00gbG9naW5zIikKICAgICAgICAgICAgZm9yIHIgaW4gY3Vyc29yLmZldGNoYWxsKCk6CiAgICAgICAgICAgICAgICB1cmwgPSByWzBdCiAgICAgICAgICAgICAgICB1c2VybmFtZSA9IHJbMV0KICAgICAgICAgICAgICAgIGVuY3J5cHRlZF9wYXNzd29yZCA9IHJbMl0KICAgICAgICAgICAgICAgIGRlY3J5cHRlZF9wYXNzd29yZCA9IHNlbGYuZGVjcnlwdF9wYXNzd29yZChlbmNyeXB0ZWRfcGFzc3dvcmQsIG1hc3Rlcl9rZXkpCiAgICAgICAgICAgICAgICBpZiB1cmwgIT0gIiI6CiAgICAgICAgICAgICAgICAgICAgZi53cml0ZShmIkRvbWFpbjoge3VybH1cblVzZXI6IHt1c2VybmFtZX1cblBhc3M6IHtkZWNyeXB0ZWRfcGFzc3dvcmR9XG5cbiIpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAgICAgICAgY3Vyc29yLmNsb3NlKCkKICAgICAgICBjb25uLmNsb3NlKCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLnJlbW92ZSgiTG9naW52YXVsdC5kYiIpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgogICAgZGVmIGdyYWJDb29raWVzKHNlbGYpOgogICAgICAgIG1hc3Rlcl9rZXkgPSBzZWxmLmdldF9tYXN0ZXJfa2V5KCkKICAgICAgICBmID0gb3BlbiAoc2VsZi50ZW1wZm9sZGVyKyJcXEdvb2dsZSBDb29raWVzLnR4dCIsICJ3KyIpCiAgICAgICAgZi53cml0ZSgiTWFkZSBieSBSZGltbyB8IGh0dHBzOi8vZ2l0aHViLmNvbS9SZGltby9IYXphcmQtVG9rZW4tR3JhYmJlci1WMlxuXG4iKQogICAgICAgIGxvZ2luX2RiID0gc2VsZi5hcHBkYXRhKydcXEdvb2dsZVxcQ2hyb21lXFxVc2VyIERhdGFcXGRlZmF1bHRcXGNvb2tpZXMnCiAgICAgICAgc2h1dGlsLmNvcHkyKGxvZ2luX2RiLCAiTG9naW52YXVsdC5kYiIpCiAgICAgICAgY29ubiA9IHNxbGl0ZTMuY29ubmVjdCgiTG9naW52YXVsdC5kYiIpCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoKQogICAgICAgIHRyeToKICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIlNFTEVDVCBob3N0X2tleSwgbmFtZSwgZW5jcnlwdGVkX3ZhbHVlIGZyb20gY29va2llcyIpCiAgICAgICAgICAgIGZvciByIGluIGN1cnNvci5mZXRjaGFsbCgpOgogICAgICAgICAgICAgICAgSG9zdCA9IHJbMF0KICAgICAgICAgICAgICAgIHVzZXIgPSByWzFdCiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRfY29va2llID0gclsyXQogICAgICAgICAgICAgICAgZGVjcnlwdGVkX2Nvb2tpZSA9IHNlbGYuZGVjcnlwdF9wYXNzd29yZChlbmNyeXB0ZWRfY29va2llLCBtYXN0ZXJfa2V5KQogICAgICAgICAgICAgICAgaWYgSG9zdCAhPSAiIjoKICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGYiSG9zdDoge0hvc3R9XG5Vc2VyOiB7dXNlcn1cbkNvb2tpZToge2RlY3J5cHRlZF9jb29raWV9XG5cbiIpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAgICAgICAgY3Vyc29yLmNsb3NlKCkKICAgICAgICBjb25uLmNsb3NlKCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLnJlbW92ZSgiTG9naW52YXVsdC5kYiIpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgogICAgZGVmIGdyYWJUb2tlbnMoc2VsZik6CiAgICAgICAgZiA9IG9wZW4gKHNlbGYudGVtcGZvbGRlcisiXFxEaXNjb3JkIFRva2Vucy50eHQiLCAidysiKQogICAgICAgIGYud3JpdGUoIk1hZGUgYnkgUmRpbW8gfCBodHRwczovL2dpdGh1Yi5jb20vUmRpbW8vSGF6YXJkLVRva2VuLUdyYWJiZXItVjJcblxuIikKICAgICAgICBwYXRocyA9IHsKICAgICAgICAgICAgJ0Rpc2NvcmQnOiBzZWxmLnJvYW1pbmcgKyByJ1xcZGlzY29yZFxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywKICAgICAgICAgICAgJ0Rpc2NvcmQgQ2FuYXJ5Jzogc2VsZi5yb2FtaW5nICsgcidcXGRpc2NvcmRjYW5hcnlcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsCiAgICAgICAgICAgICdMaWdodGNvcmQnOiBzZWxmLnJvYW1pbmcgKyByJ1xcTGlnaHRjb3JkXFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLAogICAgICAgICAgICAnRGlzY29yZCBQVEInOiBzZWxmLnJvYW1pbmcgKyByJ1xcZGlzY29yZHB0YlxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywKICAgICAgICAgICAgJ09wZXJhJzogc2VsZi5yb2FtaW5nICsgcidcXE9wZXJhIFNvZnR3YXJlXFxPcGVyYSBTdGFibGVcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsCiAgICAgICAgICAgICdPcGVyYSBHWCc6IHNlbGYucm9hbWluZyArIHInXFxPcGVyYSBTb2Z0d2FyZVxcT3BlcmEgR1ggU3RhYmxlXFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLAogICAgICAgICAgICAnQW1pZ28nOiBzZWxmLmFwcGRhdGEgKyByJ1xcQW1pZ29cXFVzZXIgRGF0YVxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywKICAgICAgICAgICAgJ1RvcmNoJzogc2VsZi5hcHBkYXRhICsgcidcXFRvcmNoXFxVc2VyIERhdGFcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsCiAgICAgICAgICAgICdLb21ldGEnOiBzZWxmLmFwcGRhdGEgKyByJ1xcS29tZXRhXFxVc2VyIERhdGFcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsCiAgICAgICAgICAgICdPcmJpdHVtJzogc2VsZi5hcHBkYXRhICsgcidcXE9yYml0dW1cXFVzZXIgRGF0YVxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywKICAgICAgICAgICAgJ0NlbnRCcm93c2VyJzogc2VsZi5hcHBkYXRhICsgcidcXENlbnRCcm93c2VyXFxVc2VyIERhdGFcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsCiAgICAgICAgICAgICc3U3Rhcic6IHNlbGYuYXBwZGF0YSArIHInXFw3U3RhclxcN1N0YXJcXFVzZXIgRGF0YVxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywKICAgICAgICAgICAgJ1NwdXRuaWsnOiBzZWxmLmFwcGRhdGEgKyByJ1xcU3B1dG5pa1xcU3B1dG5pa1xcVXNlciBEYXRhXFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLAogICAgICAgICAgICAnVml2YWxkaSc6IHNlbGYuYXBwZGF0YSArIHInXFxWaXZhbGRpXFxVc2VyIERhdGFcXERlZmF1bHRcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsCiAgICAgICAgICAgICdDaHJvbWUgU3hTJzogc2VsZi5hcHBkYXRhICsgcidcXEdvb2dsZVxcQ2hyb21lIFN4U1xcVXNlciBEYXRhXFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLAogICAgICAgICAgICAnQ2hyb21lJzogc2VsZi5hcHBkYXRhICsgcidcXEdvb2dsZVxcQ2hyb21lXFxVc2VyIERhdGFcXERlZmF1bHRcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsCiAgICAgICAgICAgICdFcGljIFByaXZhY3kgQnJvd3Nlcic6IHNlbGYuYXBwZGF0YSArIHInXFxFcGljIFByaXZhY3kgQnJvd3NlclxcVXNlciBEYXRhXFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLAogICAgICAgICAgICAnTWljcm9zb2Z0IEVkZ2UnOiBzZWxmLmFwcGRhdGEgKyByJ1xcTWljcm9zb2Z0XFxFZGdlXFxVc2VyIERhdGFcXERlZmF1bFxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywKICAgICAgICAgICAgJ1VyYW4nOiBzZWxmLmFwcGRhdGEgKyByJ1xcdUNvek1lZGlhXFxVcmFuXFxVc2VyIERhdGFcXERlZmF1bHRcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsCiAgICAgICAgICAgICdZYW5kZXgnOiBzZWxmLmFwcGRhdGEgKyByJ1xcWWFuZGV4XFxZYW5kZXhCcm93c2VyXFxVc2VyIERhdGFcXERlZmF1bHRcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsCiAgICAgICAgICAgICdCcmF2ZSc6IHNlbGYuYXBwZGF0YSArIHInXFxCcmF2ZVNvZnR3YXJlXFxCcmF2ZS1Ccm93c2VyXFxVc2VyIERhdGFcXERlZmF1bHRcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsCiAgICAgICAgICAgICdJcmlkaXVtJzogc2VsZi5hcHBkYXRhICsgcidcXElyaWRpdW1cXFVzZXIgRGF0YVxcRGVmYXVsdFxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJwogICAgICAgIH0KCiAgICAgICAgZm9yIHNvdXJjZSwgcGF0aCBpbiBwYXRocy5pdGVtcygpOgogICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMocGF0aCk6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBmb3IgZmlsZV9uYW1lIGluIG9zLmxpc3RkaXIocGF0aCk6CiAgICAgICAgICAgICAgICBpZiBub3QgZmlsZV9uYW1lLmVuZHN3aXRoKCcubG9nJykgYW5kIG5vdCBmaWxlX25hbWUuZW5kc3dpdGgoJy5sZGInKToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gW3guc3RyaXAoKSBmb3IgeCBpbiBvcGVuKGYne3BhdGh9XFx7ZmlsZV9uYW1lfScsIGVycm9ycz0naWdub3JlJykucmVhZGxpbmVzKCkgaWYgeC5zdHJpcCgpXToKICAgICAgICAgICAgICAgICAgICBmb3IgcmVnZXggaW4gKHIiW1x3LV17MjR9XC5bXHctXXs2fVwuW1x3LV17Mjd9IiwgciJtZmFcLltcdy1dezg0fSIpOgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdG9rZW4gaW4gZmluZGFsbChyZWdleCwgbGluZSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRva2Vucy5hcHBlbmQodG9rZW4pCiAgICAgICAgZm9yIHRva2VuIGluIHNlbGYudG9rZW5zOgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2Rpc2NvcmQuY29tL2FwaS92OS91c2Vycy9AbWUiLCBoZWFkZXJzPXNlbGYuZ2V0aGVhZGVycyh0b2tlbikpCiAgICAgICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgZi53cml0ZShmInt0b2tlbn1cbiIpCgogICAgZGVmIHNjcmVlbnNob3Qoc2VsZik6CiAgICAgICAgaW1hZ2UgPSBweWF1dG9ndWkuc2NyZWVuc2hvdCgpCiAgICAgICAgaW1hZ2UgPSBjdjIuY3Z0Q29sb3IobnAuYXJyYXkoaW1hZ2UpLCBjdjIuQ09MT1JfUkdCMkJHUikKICAgICAgICBjdjIuaW13cml0ZShzZWxmLnRlbXBmb2xkZXIgKyAiXFxTY3JlZW5zaG90LnBuZyIsIGltYWdlKQoKICAgIGRlZiBTZW5kSW5mbyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoImh0dHA6Ly9pcGluZm8uaW8vanNvbiIsIGhlYWRlcnM9c2VsZi5nZXRoZWFkZXJzKCkpLmpzb24oKQogICAgICAgICAgICBpcCA9IGRhdGFbJ2lwJ10KICAgICAgICAgICAgbG9jID0gZGF0YVsnbG9jJ10KICAgICAgICAgICAgY2l0eSA9IGRhdGFbJ2NpdHknXQogICAgICAgICAgICBjb3VudHJ5ID0gZGF0YVsnY291bnRyeSddCiAgICAgICAgICAgIHJlZ2lvbiA9IGRhdGFbJ3JlZ2lvbiddCiAgICAgICAgICAgIGdvb2dsZW1hcCA9ICJodHRwczovL3d3dy5nb29nbGUuY29tL21hcHMvc2VhcmNoL2dvb2dsZSttYXArKyIgKyBsb2MKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKICAgICAgICB0ZW1wID0gb3MucGF0aC5qb2luKHNlbGYudGVtcGZvbGRlcikKICAgICAgICBuZXcgPSBvcy5wYXRoLmpvaW4oc2VsZi5hcHBkYXRhLCBmJ0hhemFyZC5WMi1be29zLmdldGxvZ2luKCl9XS56aXAnKQogICAgICAgIHNlbGYuemlwKHRlbXAsIG5ldykKICAgICAgICBmb3IgZGlybmFtZSwgXywgZmlsZXMgaW4gb3Mud2FsayhzZWxmLnRlbXBmb2xkZXIpOgogICAgICAgICAgICBmb3IgZiBpbiBmaWxlczoKICAgICAgICAgICAgICAgIHNlbGYuZmlsZXMgKz0gZiJcbip7Zn0iCiAgICAgICAgbiA9IDAKICAgICAgICBmb3IgciwgZCwgZmlsZXMgaW4gb3Mud2FsayhzZWxmLnRlbXBmb2xkZXIpOgogICAgICAgICAgICBuKz0gbGVuKGZpbGVzKQogICAgICAgICAgICBzZWxmLmZpbGVDb3VudCA9IGYie259IEZpbGVzIEZvdW5kOiAiCiAgICAgICAgZW1iZWQgPSB7CiAgICAgICAgICAgICJhdmF0YXJfdXJsIjoiaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vYXR0YWNobWVudHMvODI4MDQ3NzkzNjE5ODYxNTU3Lzg5MTUzNzI1NTA3ODk4NTgxOS9uZWRsYWRkbmluZ185LmdpZiIsCiAgICAgICAgICAgICJlbWJlZHMiOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgImF1dGhvciI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAiSGF6YXJkIFRva2VuIEdyYWJiZXIuVjIiLAogICAgICAgICAgICAgICAgICAgICAgICAidXJsIjogImh0dHBzOi8vZ2l0aHViLmNvbS9SZGltby9IYXphcmQtVG9rZW4tR3JhYmJlci1WMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJpY29uX3VybCI6ICJodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9hdHRhY2htZW50cy84MjgwNDc3OTM2MTk4NjE1NTcvODkxNjk4MTkzMjQ1NTYwODYyL0hhemFyZC5naWYiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiZGVzY3JpcHRpb24iOiBmIk5ldyBWaWN0aW0gdG8gSGF6YXJkIFRva2VuIEdyYWJiZXIuVjJcbmBgYGZpeFxuVXNlcm5hbWU6IHtvcy5nZXRsb2dpbigpfVxuQ29tcHV0ZXJOYW1lOiB7b3MuZ2V0ZW52KCdDT01QVVRFUk5BTUUnKX1cbklQOiB7aXB9XG5DaXR5OiB7Y2l0eX1cblJlZ2lvbjoge3JlZ2lvbn1cbkNvdW50cnk6IHtjb3VudHJ5fWBgYFtHb29nbGUgTWFwcyBMb2NhdGlvbl0oe2dvb2dsZW1hcH0pXG5gYGBmaXhcbntzZWxmLmZpbGVDb3VudH17c2VsZi5maWxlc31gYGAiLAogICAgICAgICAgICAgICAgICAgICJjb2xvciI6IDE2MTE5MTAxLAoKICAgICAgICAgICAgICAgICAgICAidGh1bWJuYWlsIjogewogICAgICAgICAgICAgICAgICAgICAgInVybCI6ICJodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9hdHRhY2htZW50cy84MjgwNDc3OTM2MTk4NjE1NTcvODkxNTM3NTk4MDYzOTgwNTQ0L25lZGxhZGRuaW5nXzEwLmdpZiIKICAgICAgICAgICAgICAgICAgICB9LCAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgImZvb3RlciI6IHsKICAgICAgICAgICAgICAgICAgICAgICJ0ZXh0IjogIsKpUmRpbW8jNjk2OSBodHRwczovL2dpdGh1Yi5jb20vUmRpbW8vSGF6YXJkLVRva2VuLUdyYWJiZXItVjIiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfQogICAgICAgIHJlcXVlc3RzLnBvc3Qoc2VsZi53ZWJob29rLCBqc29uPWVtYmVkKQogICAgICAgIHJlcXVlc3RzLnBvc3Qoc2VsZi53ZWJob29rLCBmaWxlcz17J3VwbG9hZF9maWxlJzogb3BlbihuZXcsJ3JiJyl9KQoKICAgIGRlZiB6aXAoc2VsZiwgc3JjLCBkc3QpOgogICAgICAgIHppcHBlZF9maWxlID0gemlwZmlsZS5aaXBGaWxlKGRzdCwgInciLCB6aXBmaWxlLlpJUF9ERUZMQVRFRCkKICAgICAgICBhYnNfc3JjID0gb3MucGF0aC5hYnNwYXRoKHNyYykKICAgICAgICBmb3IgZGlybmFtZSwgXywgZmlsZXMgaW4gb3Mud2FsayhzcmMpOgogICAgICAgICAgICBmb3IgZmlsZW5hbWUgaW4gZmlsZXM6CiAgICAgICAgICAgICAgICBhYnNuYW1lID0gb3MucGF0aC5hYnNwYXRoKG9zLnBhdGguam9pbihkaXJuYW1lLCBmaWxlbmFtZSkpCiAgICAgICAgICAgICAgICBhcmNuYW1lID0gYWJzbmFtZVtsZW4oYWJzX3NyYykgKyAxOl0KICAgICAgICAgICAgICAgIHppcHBlZF9maWxlLndyaXRlKGFic25hbWUsIGFyY25hbWUpCiAgICAgICAgemlwcGVkX2ZpbGUuY2xvc2UoKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIEhhemFyZF9Ub2tlbl9HcmFiYmVyX1YyKCkK"
"}
